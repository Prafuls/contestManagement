<!DOCTYPE html>

<html lang="en-US">
<head>
    <title>Register for the Tournament</title>
    <meta name="description" content="Register for the Dulles High School TMSCA Tournament">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Sushain Cherivirala">
    <link rel="shortcut icon" href="/favicon.ico">
    <link type="text/css" href="/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
    body {
    	padding-top: 60px;
    	/* 60px to make the container go all the way to the bottom of the topbar */
    }
    
    span.tab {
    	padding: 0 30px;
    }
    
    span.tab2 {
    	padding: 0 20px;
    }
    '
    </style>
</head>

<body onload="ChangeForm();EnableSubmit();CalcCost();">
	#parse("navbar.html")

	<div class="container">
		<noscript>Please enable JavaScript, otherwise numerous areas of this website will be
			nonfunctional.</noscript>
		<h1>Contest Registration</h1>

		#if( $updated )
		<div class="alert alert-success">
			<a class="close" data-dismiss="alert">&times;</a> <strong>Success! </strong>Your registration has been
			recorded. You will receive a confirmation e-mail soon.
		</div>
		#elseif( !$registrationError.equals("") )
		<div class="alert alert-error">
			<a class="close" data-dismiss="alert">&times;</a> <strong>Oh no!</strong> $registrationError
		</div>
		#elseif( $error )
		<div class="alert alert-error">
			<a class="close" data-dismiss="alert">&times;</a> <strong>Oh no!</strong> There has been a problem with
			your registration, look below.
		</div>
		#else
		<div class="alert alert-info">
			<a class="close" data-dismiss="alert">&times;</a> <strong>Remember! </strong>Do not register multiple
			times, <a href="\contactUs">contact us</a> to make changes to your registration.
		</div>
		#end
		<form method="post" class="form-horizontal">
			<fieldset>


				<div class="control-group">
					<label class="control-label" for="registration">Registration Type</label>
					<div class="controls">
						<label class="radio"> <input type="radio" name="registrationType" id="regType1" value="coach"
							onclick="ChangeForm()" #if($coach) checked #end> Coach
						</label> <label class="radio"> <input type="radio" name="registrationType" id="regType2" value="student"
							onclick="ChangeForm()" #if($student) checked #end> Student
						</label>
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="schoolLevel">School Level</label>
					<div class="controls">
						<label class="radio"> <input type="radio" name="schoolLevel" id="schoolType1"
							onclick="CalcCost();ChangeForm();" value="middle" #if($middle) checked #end> Middle
						</label> <label class="radio"> <input type="radio" name="schoolLevel" id="schoolType2"
							onclick="CalcCost();ChangeForm();" value="high" #if($high) checked #end> High
						</label>
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="schoolName">Official School Name</label>
					<div class="controls">
						<input type="text" name="schoolName" class="input-xlarge" id="schoolName" value="$schoolName" required>
						<span class="help-inline">Omit "Middle School", "High School", "Junior High School", etc.</span>
					</div>

				</div>

				<div class="control-group">
					<label class="control-label" for="name">Your Name</label>
					<div class="controls">
						<input type="text" name="name" value="$name" class="input-xlarge" id="name" required>
					</div>
				</div>

				<div class=#if($userError) "control-group error" #else "control-group" #end>
					<label class="control-label" for="email">Your E-Mail Address</label>
					<div class="controls">
						<input type="email" name="email" value="$email" class="input-xlarge" id="email" required>
						#if($userError) <span class="help-inline">A registration already exists for that E-Mail Address.</span>
						#end
					</div>

				</div>


				<div class="control-group" id="aliases">
					<label class="control-label" for="schoolAliases"> School Aliases</label>
					<div class="controls">
						<input type="text" name="aliases" value="$aliases" class="input-xlarge" id="schoolAliases">
						<p class="help-block">Please list any other names your school is commonly called (separated by
							commas).</p>
					</div>
				</div>

				<p class="help-block">
					<b> <span class="tab"></span><span class="tab"></span><span class="tab"></span>Number Sense<span
						class="tab"></span>&nbsp;Calculator <span class="tab2"></span>&nbsp;&nbsp;<span class="tab2"></span>Math<span
						class="tab2"></span>&nbsp;<span class="tab"></span>Science
					</b>
				</p>

				<div id="mid">
					<div class="control-group">
						<label class="control-label" for="level6">6th Grade Registration</label>
						<div class="controls controls-row">
							<input class="span2" type="number" value="$sixN" name="6n" id="level6" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$sixC" name="6c" id="level6" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$sixM" name="6m" id="level6" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$sixS" name="6s" id="level6" onchange="CalcCost()" required>
						</div>
					</div>

					<div class="control-group">
						<label class="control-label" for="level7">7th Grade Registration</label>
						<div class="controls controls-row">
							<input class="span2" type="number" value="$sevenN" name="7n" id="level7" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$sevenC" name="7c" id="level7" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$sevenM" name="7m" id="level7" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$sevenS" name="7s" id="level7" onchange="CalcCost()" required>
						</div>
					</div>

					<div class="control-group">
						<label class="control-label" for="level8">8th Grade Registration</label>
						<div class="controls controls-row">
							<input class="span2" type="number" value="$eightN" name="8n" id="level8" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$eightC" name="8c" id="level8" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$eightM" name="8m" id="level8" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$eightS" name="8s" id="level8" onchange="CalcCost()" required>
						</div>
					</div>
				</div>

				<div id="hi">
					<div class="control-group">
						<label class="control-label" for="level9">9th Grade Registration</label>
						<div class="controls controls-row">
							<input class="span2" type="number" value="$nineN" name="9n" id="level9" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$nineC" name="9c" id="level9" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$nineM" name="9m" id="level9" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$nineS" name="9s" id="level9" onchange="CalcCost()" required>
						</div>
					</div>

					<div class="control-group">
						<label class="control-label" for="level10">10th Grade Registration</label>
						<div class="controls controls-row">
							<input class="span2" type="number" value="$tenN" name="10n" id="level10" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$tenC" name="10c" id="level10" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$tenM" name="10m" id="level10" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$tenS" name="10s" id="level10" onchange="CalcCost()" required>
						</div>
					</div>

					<div class="control-group">
						<label class="control-label" for="level11">11th Grade Registration</label>
						<div class="controls controls-row">
							<input class="span2" type="number" value="$elevenN" name="11n" id="level11" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$elevenC" name="11c" id="level11" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$elevenM" name="11m" id="level11" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$elevenS" name="11s" id="level11" onchange="CalcCost()" required>
						</div>
					</div>

					<div class="control-group">
						<label class="control-label" for="level12">12th Grade Registration</label>
						<div class="controls controls-row">
							<input class="span2" type="number" value="$twelveN" name="12n" id="level12" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$twelveC" name="12c" id="level12" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$twelveM" name="12m" id="level12" onchange="CalcCost()" required>
							<input class="span2" type="number" value="$twelveS" name="12s" id="level12" onchange="CalcCost()" required>
						</div>
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="schoolName">Registration Charges ($)</label>
					<div class="controls">
						<input type="text" class="input-small" name="cost" id="cost" value="0" readonly>
					</div>
				</div>

				<div class="control-group">
					<p class="help-block">
						An account allows you to check your scores <em>online</em> during and after the competition and review
						your registration.
					</p>
					<label class="control-label" for="level">Create an Account?</label>

					<div class="controls">
						<label class="radio"> <input type="radio" name="account" id="account1"
							onclick="ChangeForm()" value="yes" #if($account) checked #end> Yes
						</label> <label class="radio"> <input type="radio" name="account" id="account2"
							onclick="ChangeForm()" value="no" #if(!$account) checked #end> No
						</label>
					</div>
				</div>

				<div id="acc">

					<div class="control-group">
						<label class="control-label" for="password">Password</label>
						<div class="controls">
							<input type="password" id="password" name="password" value="" maxlength="32" required>
						</div>
					</div>

					<div class=#if($passwordError) "control-group error" #else "control-group" #end>
						<label class="control-label" for="password">Confirm Password</label>
						<div class="controls">
							<input type="password" id="confPassword" name="confPassword" value="" maxlength="32" required>
							#if($passwordError) <span class="help-inline">Those passwords didn't match, try again.</span> #end
						</div>
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="captcha">CAPTCHA</label>
					<div class="controls">
						<input type="text" name="captcha" class="input-small" id="captcha" onkeyup="AuthCaptcha()"
							onblur="ResetSubmit()" required>
						<p class="help-block">$captcha</p>
					</div>
				</div>

				<input type="hidden" name="hash" id="hash" value="$hash" /> <input type="hidden" name="salt" id="salt"
					value="$salt" /> <input type="hidden" name="regError" id="regError" value="$registrationError" />

				<div class="form-actions">
					<button type="submit" id="submit" onclick="AuthCaptcha()" class="btn btn-primary" disabled>Submit
						Registration</button>
					<button type="reset" id="reset" class="btn btn-danger" disabled>Reset</button>
					<p class="help-inline" id="answerCaptcha">Please enable JavaScript to continue.</p>
				</div>
			</fieldset>
		</form>
	</div>

	<script src="/js/md5hash.js" type="text/javascript"></script>
	<script type="text/javascript">
		function AuthCaptcha() {
			if (calcMD5(document.getElementById('salt').value
					+ document.getElementById('captcha').value) === document
					.getElementById('hash').value) {
				document.getElementById('submit').disabled = false;
				document.getElementById('answerCaptcha').style.display = "none";
			} else {
				document.getElementById('submit').disabled = true;
				document.getElementById('answerCaptcha').style.display = "inline";
				document.getElementById('answerCaptcha').innerHTML = "Answer the captcha correctly to prove that you are not a robot.";
			}
		}

		function ResetSubmit() {
			document.getElementById('submit').disabled = false;
			document.getElementById('answerCaptcha').style.display = "none";
		}

		function EnableSubmit() {
			if (document.getElementById('regError').value === "") {
				document.getElementById('submit').disabled = false;
				document.getElementById('reset').disabled = false;
			}
			document.getElementById('answerCaptcha').innerHTML = "";
		}
	</script>

	<script type="text/javascript">
		function CalcCost() {
			sum = 0;
			if (document.getElementById('schoolType1').checked) {
				for ( var i = 6; i <= 8; i++) {
					if (parseInt(document.getElementsByName(i + 'n')[0].value) < 0)
						document.getElementsByName(i + 'n')[0].value = 0;
					if (parseInt(document.getElementsByName(i + 'c')[0].value) < 0)
						document.getElementsByName(i + 'c')[0].value = 0;
					if (parseInt(document.getElementsByName(i + 's')[0].value) < 0)
						document.getElementsByName(i + 's')[0].value = 0;
					if (parseInt(document.getElementsByName(i + 'm')[0].value) < 0)
						document.getElementsByName(i + 'm')[0].value = 0;
					sum = sum
							+ $price
							* parseInt(document.getElementsByName(i + 'n')[0].value,
									10);
					sum = sum
							+ $price
							* parseInt(document.getElementsByName(i + 'c')[0].value,
									10);
					sum = sum
							+ $price
							* parseInt(document.getElementsByName(i + 's')[0].value,
									10);
					sum = sum
							+ $price
							* parseInt(document.getElementsByName(i + 'm')[0].value,
									10);
				}
			} else {
				for ( var i = 9; i <= 12; i++) {
					if (parseInt(document.getElementsByName(i + 'n')[0].value) < 0)
						document.getElementsByName(i + 'n')[0].value = 0;
					if (parseInt(document.getElementsByName(i + 'c')[0].value) < 0)
						document.getElementsByName(i + 'c')[0].value = 0;
					if (parseInt(document.getElementsByName(i + 's')[0].value) < 0)
						document.getElementsByName(i + 's')[0].value = 0;
					if (parseInt(document.getElementsByName(i + 'm')[0].value) < 0)
						document.getElementsByName(i + 'm')[0].value = 0;
					sum = sum
							+ $price
							* parseInt(document.getElementsByName(i + 'n')[0].value,
									10);
					sum = sum
							+ $price
							* parseInt(document.getElementsByName(i + 'c')[0].value,
									10);
					sum = sum
							+ $price
							* parseInt(document.getElementsByName(i + 's')[0].value,
									10);
					sum = sum
							+ $price
							* parseInt(document.getElementsByName(i + 'm')[0].value,
									10);
				}
			}

			document.getElementById('cost').value = sum;
		}
	</script>

	<script type="text/javascript">
		function ChangeForm() {
			if (document.getElementById('schoolType1').checked)
				document.getElementById('mid').style.display = "inline";
			else
				document.getElementById('mid').style.display = "none";

			if (document.getElementById('schoolType2').checked)
				document.getElementById('hi').style.display = "inline";
			else
				document.getElementById('hi').style.display = "none";

			if (document.getElementById('regType2').checked)
				document.getElementById('aliases').style.display = "inline";
			else
				document.getElementById('aliases').style.display = "none";

			if (document.getElementById('account1').checked) {
				document.getElementById('password').required = true;
				document.getElementById('confPassword').required = true;
				document.getElementById('acc').style.display = "inline";
			} else {
				document.getElementById('password').required = false;
				document.getElementById('confPassword').required = false;
				document.getElementById('acc').style.display = "none";
			}
		}
	</script>

	<script type="text/javascript" src="/js/jquery.min.js"></script>
	<script type="text/javascript" src="/js/bootstrap-dropdown.js"></script>
	<script type="text/javascript" src="/js/bootstrap-alert.js"></script>
</body>
</html>



